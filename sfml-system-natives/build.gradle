/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample C++ project to get you started.
 * For more details on building C++ applications and libraries, please refer to https://docs.gradle.org/8.5/userguide/building_cpp_projects.html in the Gradle documentation.
 */

import org.gradle.internal.jvm.Jvm;

plugins {
    // Apply the cpp-library plugin to add support for building C++ libraries
    id 'cpp-library'
}

// https://github.com/vladsoroka/GradleJniSample
library {
    binaries.configureEach { CppBinary binary ->
        def compileTask = binary.compileTask.get()
        compileTask.includes.from("${Jvm.current().javaHome}/include")

        def osFamily = binary.targetPlatform.targetMachine.operatingSystemFamily
        if (osFamily.linux) {
            compileTask.includes.from("${Jvm.current().javaHome}/include/linux")
        }

        def linkTask = binary.linkTask.get()
        def toolChain = binary.toolChain
        if (toolChain instanceof VisualCpp) {
            // todo
        } else if (toolChain instanceof GccCompatibleToolChain) {
            linkTask.linkerArgs.addAll(['-lsfml-system'])
        }
    }
}
